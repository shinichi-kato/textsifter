# Textsifter

テキストを様々な条件で前処理し、共起やマルコフ連鎖ネットワークとして可視化・データ出力する

## 概要

テキストをテキスト解析したりチャットボットで使用するマルコフ辞書にするには、適切な前処理が必要です。
このツールでは条件を様々に変えて結果を共起ネットワークやマルコフ連鎖ネットワークとして可視化する
ことで、前処理方法の検討を行うことができます。

## Getting Started

### Prerequisities

* python 3.8以上

### Installing

プロジェクトのルートディレクトリで以下を実行します。
```
python -m venv .venv
```
次に`source .venv/bin/activate`でvenvを有効化します。
vscodeの場合は`Ctrl-Shift-p` で Python: Select Interpreterを選び、.venvが有効なインタプリタを選び、その後ターミナルを起動します。
ターミナルで(.venv)が表示された状態になっているのを確認し、以下のコマンドを実行します。
```
pip -m requirements.txt
sudo apt-get install python3-tk
```

## 使用法

```
$ ./textsifter テキストファイル, [テキストファイル,...] [前処理条件] {plot,compile} [可視化条件]
```
以下の前処理条件が選べます。
-e, --encoding テキストの文字コードを指定
-t, --term_file 指定したファイルに記述した用語をあらかじめ一つのノードにする
-s, --stopword 除外対象の形態素を指定します
-ff, --fix-fragment 
       * 先行する語と接尾辞の結合
       * 先行する語と格助詞の結合

以下の可視化処理を行うことができます。
--network 

### テキスト分類課題への適用
得られた結果は共起ネットワークやマルコフ連鎖ネットワークとして観察することができます。
テキスト分類課題を実行する場合、共起ネットワークが複数の島に別れており、教師データを反映していればテキスト分類の精度が期待できますが、島が一つに合一している場合は精度は低くなることが予想されます。

### マルコフ辞書生成への適用
■文末からのマルコフ連鎖生成
日本語では「犬が好き」「りんごが好き」のように主語や目的語より後ろに動詞が現れます。
文頭からのマルコフ連鎖では
犬→が, りんご→が, が→好き
のようになります。一方文末からのマルコフ連鎖では 
好き
この方法で作られた辞書は人間が拡張したり不適切な反応を除去しやすいことが望ましい

■文末からのマルコフ連鎖辞書生成
日本語では「犬が好き」「ネコが好き」のように

■ 助詞を分離しない
日本語では「犬が好き」「ネコが好き」のように

### チャットボット用ログ型辞書の生成
[J-TOCC](http://nakamata.info/database/)の形式に対応しています。
```
$ ./sifter --mode log2script <ログのテキストファイル> > 出力先(json)
```

## 作者
加藤真一